<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>虚拟商店</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* 全局样式 */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'PingFang SC', 'Microsoft YaHei', sans-serif;
        }

        :root {
            --primary: #3B82F6;
            --secondary: #2563EB;
            --accent: #60A5FA;
            --light: #F8FAFC;
            --dark: #1E293B;
            --gray: #64748B;
            --gray-light: #E2E8F0;
            --gray-dark: #475569;
            --border-radius: 8px;
            --shadow: 0 2px 6px rgba(0, 0, 0, 0.06);
            --shadow-hover: 0 4px 10px rgba(0, 0, 0, 0.1);
            --transition: all 0.2s ease;
        }

        body {
            background: var(--light);
            color: var(--dark);
            min-height: 100vh;
            line-height: 1.5;
        }

        /* 顶部时间栏 */
        .status-bar {
            background: white;
            padding: 10px 16px;
            border-bottom: 1px solid var(--gray-light);
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 13px;
            font-weight: 500;
            color: var(--gray-dark);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .time {
            font-weight: 600;
            color: var(--dark);
        }

        .status-icons {
            display: flex;
            gap: 6px;
            align-items: center;
        }

        /* 导航栏 */
        .navbar {
            background: white;
            padding: 14px 16px;
            border-bottom: 1px solid var(--gray-light);
            position: sticky;
            top: 38px;
            z-index: 999;
        }

        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 18px;
            font-weight: 700;
            color: var(--primary);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .controls {
            display: flex;
            gap: 8px;
        }

        .control-btn {
            padding: 6px 12px;
            border-radius: 6px;
            background: white;
            border: 1px solid var(--gray-light);
            color: var(--gray);
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
        }

        .control-btn:hover {
            border-color: var(--primary);
            color: var(--primary);
        }

        .control-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        /* 主要内容区域 */
        .main-content {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px 16px 70px;
        }

        /* 页面标题 */
        .page-title {
            font-size: 22px;
            font-weight: 600;
            margin-bottom: 6px;
            color: var(--dark);
        }

        .page-subtitle {
            font-size: 14px;
            color: var(--gray);
            margin-bottom: 24px;
        }

        .divider {
            height: 1px;
            background: var(--gray-light);
            margin: 20px 0;
        }
</style>
</head>
<body>
    <!-- 顶部状态栏 -->
    <div class="status-bar">
        <div class="time">12:08</div>
        <div class="status-icons">
            <i class="fas fa-wifi"></i>
            <i class="fas fa-signal"></i>
            <i class="fas fa-battery-three-quarters"></i>
        </div>
    </div>

    <!-- 导航栏 -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="#" class="logo" onclick="showPage('products')">
                <i class="fas fa-shopping-bag"></i>
                虚拟商店
            </a>
            
            <div class="controls">
                <div class="language-selector">
                    <button class="control-btn active" onclick="setLanguage('zh')">
                        中文
                    </button>
                    <button class="control-btn" onclick="setLanguage('en')">
                        EN
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- 主要内容区域 -->
    <div class="main-content">
        <!-- 商品页面 -->
        <div class="page active" id="products-page">
            <h1 class="page-title">商品</h1>
            <p class="page-subtitle">选择您需要的商品添加到购物车</p>
            
            <div class="divider"></div>
            
            <div class="products-list" id="products-container">
                <!-- 商品将通过JavaScript动态生成 -->
            </div>
        </div>
/* 商品列表 */
.products-list {
    display: flex;
    flex-direction: column;
    gap: 16px;
}

/* 商品卡片 */
.product-card {
    background: white;
    border-radius: var(--border-radius);
    padding: 20px;
    box-shadow: var(--shadow);
    border: 1px solid var(--gray-light);
}

.product-header {
    margin-bottom: 16px;
    padding-bottom: 12px;
    border-bottom: 1px solid var(--gray-light);
}

.product-title {
    font-size: 18px;
    font-weight: 600;
    margin-bottom: 4px;
    color: var(--dark);
}

.product-desc {
    font-size: 13px;
    color: var(--gray);
}

/* 商品选项 */
.product-options {
    margin-bottom: 16px;
}

.option {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 12px;
    margin-bottom: 6px;
    background: var(--light);
    border-radius: 6px;
    border: 1px solid transparent;
    transition: var(--transition);
}

.option:hover {
    border-color: var(--accent);
}

.option-name {
    font-weight: 500;
    color: var(--dark);
    font-size: 14px;
}

.option-price {
    font-weight: 600;
    color: var(--primary);
    font-size: 15px;
}

/* 按钮样式 - 优化后 */
.btn {
    padding: 8px 14px;
    border-radius: 6px;
    font-size: 13px;
    font-weight: 500;
    cursor: pointer;
    transition: var(--transition);
    border: none;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
}

.btn-sm {
    padding: 6px 10px;
    font-size: 12px;
}

.btn-primary {
    background: var(--primary);
    color: white;
}

.btn-primary:hover {
    background: var(--secondary);
    box-shadow: 0 2px 6px rgba(59, 130, 246, 0.25);
}

.btn-secondary {
    background: white;
    color: var(--primary);
    border: 1px solid var(--gray-light);
}

.btn-secondary:hover {
    border-color: var(--primary);
    background: rgba(59, 130, 246, 0.05);
}

.btn-icon {
    width: 32px;
    height: 32px;
    padding: 6px;
    border-radius: 6px;
    background: var(--light);
    color: var(--gray);
    border: 1px solid var(--gray-light);
}

.btn-icon:hover {
    background: var(--primary);
    color: white;
    border-color: var(--primary);
}

.add-to-cart-btn {
    width: 36px;
    height: 36px;
    border-radius: 6px;
    background: var(--primary);
    color: white;
    border: none;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: var(--transition);
    margin-left: 8px;
}

.add-to-cart-btn:hover {
    background: var(--secondary);
    transform: scale(1.05);
}

.product-add-btn {
    width: 100%;
    padding: 10px;
    background: var(--primary);
    color: white;
    border: none;
    border-radius: 6px;
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    transition: var(--transition);
    margin-top: 12px;
}

.product-add-btn:hover {
    background: var(--secondary);
    box-shadow: 0 2px 6px rgba(59, 130, 246, 0.25);
}

/* 购物车页面 */
.cart-container {
    background: white;
    border-radius: var(--border-radius);
    padding: 20px;
    box-shadow: var(--shadow);
}

.cart-items {
    margin-bottom: 20px;
}

.cart-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 14px;
    margin-bottom: 10px;
    background: var(--light);
    border-radius: 6px;
    border: 1px solid var(--gray-light);
}

.cart-item-info {
    flex: 1;
}

.cart-item-name {
    font-weight: 500;
    margin-bottom: 2px;
    color: var(--dark);
    font-size: 14px;
}

.cart-item-option {
    font-size: 12px;
    color: var(--gray);
}

.cart-item-price {
    font-weight: 600;
    color: var(--primary);
    margin-left: 12px;
    font-size: 14px;
}

.cart-item-actions {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-left: 12px;
}
<!-- 购物车页面 -->
<div class="page" id="cart-page">
    <h1 class="page-title">购物车</h1>
    <p class="page-subtitle">查看并管理您的购物车</p>
    
    <div class="divider"></div>
    
    <div class="cart-container">
        <div class="cart-items" id="cart-items-container">
            <div class="empty-cart" id="empty-cart">
                <div style="text-align: center; padding: 32px 16px; color: var(--gray);">
                    <i class="fas fa-shopping-cart" style="font-size: 40px; margin-bottom: 12px; opacity: 0.5;"></i>
                    <h3 style="margin-bottom: 6px; color: var(--dark); font-size: 16px;">购物车是空的</h3>
                    <p style="margin-bottom: 16px; font-size: 13px;">去商品页面添加一些商品吧！</p>
                    <button class="btn btn-primary" onclick="showPage('products')" style="width: auto; padding: 8px 16px;">
                        <i class="fas fa-store"></i>
                        浏览商品
                    </button>
                </div>
            </div>
        </div>
        
        <div class="cart-summary" style="display: none;" id="cart-summary-section">
            <div class="summary-item">
                <span style="font-size: 13px;">小计</span>
                <span id="cart-subtotal" style="font-size: 14px;">$0.00</span>
            </div>
            <div class="summary-item">
                <span style="font-size: 13px;">手续费</span>
                <span id="cart-fee" style="font-size: 14px;">$0.00</span>
            </div>
            <div class="summary-total">
                <span style="font-size: 15px;">总计</span>
                <span id="cart-total" style="font-size: 16px;">$0.00</span>
            </div>
            <button class="product-add-btn" id="proceed-checkout" onclick="showPage('checkout')" style="margin-top: 16px;">
                <i class="fas fa-credit-card"></i>
                前往付款
            </button>
        </div>
    </div>
</div>

<!-- 付款页面 -->
<div class="page" id="checkout-page">
    <h1 class="page-title">付款</h1>
    <p class="page-subtitle">选择付款方式完成购买</p>
    
    <div class="divider"></div>
    
    <div class="payment-options">
        <div class="payment-option active" onclick="selectPaymentMethod('tng')">
            <div style="display: flex; align-items: center; gap: 10px;">
                <div style="width: 40px; height: 40px; background: var(--primary); color: white; border-radius: 8px; display: flex; align-items: center; justify-content: center;">
                    <i class="fas fa-mobile-alt"></i>
                </div>
                <div>
                    <div style="font-weight: 500; font-size: 15px;">TNG eWallet</div>
                    <div style="font-size: 12px; color: var(--gray);">使用Touch 'n Go电子钱包付款</div>
                </div>
            </div>
        </div>
        
        <div class="payment-option" onclick="selectPaymentMethod('ltc')">
            <div style="display: flex; align-items: center; gap: 10px;">
                <div style="width: 40px; height: 40px; background: var(--primary); color: white; border-radius: 8px; display: flex; align-items: center; justify-content: center;">
                    <i class="fab fa-bitcoin"></i>
                </div>
                <div>
                    <div style="font-weight: 500; font-size: 15px;">Litecoin (LTC)</div>
                    <div style="font-size: 12px; color: var(--gray);">使用加密货币付款</div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="cart-container" style="margin-top: 20px;">
        <!-- TNG付款详情 -->
        <div id="tng-details">
            <h3 style="margin-bottom: 12px; font-size: 16px;">TNG付款说明</h3>
            <div style="margin-bottom: 16px;">
                <div style="display: flex; align-items: flex-start; gap: 10px; margin-bottom: 10px;">
                    <div style="width: 20px; height: 20px; background: var(--primary); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 11px;">1</div>
                    <div>
                        <div style="font-weight: 500; margin-bottom: 2px; font-size: 13px;">打开TNG应用</div>
                        <div style="font-size: 12px; color: var(--gray);">在手机上打开Touch 'n Go电子钱包应用</div>
                    </div>
                </div>
                <div style="display: flex; align-items: flex-start; gap: 10px; margin-bottom: 10px;">
                    <div style="width: 20px; height: 20px; background: var(--primary); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 11px;">2</div>
                    <div>
                        <div style="font-weight: 500; margin-bottom: 2px; font-size: 13px;">扫描QR码</div>
                        <div style="font-size: 12px; color: var(--gray);">扫描下面的QR码或使用手机号码付款</div>
                    </div>
                </div>
                <div style="display: flex; align-items: flex-start; gap: 10px;">
                    <div style="width: 20px; height: 20px; background: var(--primary); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 11px;">3</div>
                    <div>
                        <div style="font-weight: 500; margin-bottom: 2px; font-size: 13px;">确认付款</div>
                        <div style="font-size: 12px; color: var(--gray);">付款后点击"确认付款"按钮</div>
                    </div>
                </div>
            </div>
            
            <div style="text-align: center; margin: 20px 0;">
                <div style="width: 160px; height: 160px; margin: 0 auto 12px; border: 1px solid var(--gray-light); border-radius: 6px; overflow: hidden; background: white; padding: 8px;">
                    <img src="https://i.ibb.co/mFC45kFx/IMG-20251215-184553-1.jpg" alt="TNG QR Code" style="width: 100%; height: 100%; object-fit: contain;">
                </div>
                <div style="font-size: 13px;">
                    <p style="margin-bottom: 4px;"><i class="fas fa-phone"></i> <strong>手机号码:</strong> +60 11-6243 0710</p>
                    <p><i class="fab fa-whatsapp"></i> <strong>WhatsApp:</strong> +60 11-6243 0710</p>
                </div>
            </div>
        </div>
        
        <!-- LTC付款详情 -->
        <div id="ltc-details" style="display: none;">
            <h3 style="margin-bottom: 12px; font-size: 16px;">LTC付款说明</h3>
            <div style="margin-bottom: 16px;">
                <div style="display: flex; align-items: flex-start; gap: 10px; margin-bottom: 10px;">
                    <div style="width: 20px; height: 20px; background: var(--primary); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 11px;">1</div>
                    <div>
                        <div style="font-weight: 500; margin-bottom: 2px; font-size: 13px;">打开钱包</div>
                        <div style="font-size: 12px; color: var(--gray);">打开您的加密货币钱包应用</div>
                    </div>
                </div>
                <div style="display: flex; align-items: flex-start; gap: 10px; margin-bottom: 10px;">
                    <div style="width: 20px; height: 20px; background: var(--primary); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 11px;">2</div>
                    <div>
                        <div style="font-weight: 500; margin-bottom: 2px; font-size: 13px;">发送LTC</div>
                        <div style="font-size: 12px; color: var(--gray);">发送LTC到以下地址或扫描QR码</div>
                    </div>
                </div>
                <div style="display: flex; align-items: flex-start; gap: 10px;">
                    <div style="width: 20px; height: 20px; background: var(--primary); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 11px;">3</div>
                    <div>
                        <div style="font-weight: 500; margin-bottom: 2px; font-size: 13px;">确认付款</div>
                        <div style="font-size: 12px; color: var(--gray);">付款后点击"确认付款"按钮</div>
                    </div>
                </div>
            </div>
            
            <div style="text-align: center; margin: 20px 0;">
                <div style="width: 160px; height: 160px; margin: 0 auto 12px; border: 1px solid var(--gray-light); border-radius: 6px; overflow: hidden; background: white; padding: 8px;">
                    <img src="https://i.ibb.co/JjqdbnSn/IMG-20260102-WA0000.jpg" alt="LTC QR Code" style="width: 100%; height: 100%; object-fit: contain;">
                </div>
                <div style="font-size: 13px;">
                    <p style="margin-bottom: 6px;"><i class="fas fa-wallet"></i> <strong>LTC地址:</strong></p>
                    <div style="background: var(--light); padding: 10px; border-radius: 6px; font-family: monospace; font-size: 12px; word-break: break-all; margin: 4px 0 8px;">
                        ltc1qq7ra3uhka9sf38tq4m5elp0mawn99ytxkk0xvw
                    </div>
                    <p><i class="fab fa-whatsapp"></i> <strong>付款后请WhatsApp截图确认</strong></p>
                </div>
            </div>
        </div>
        
        <div style="display: flex; gap: 10px; margin-top: 20px;">
            <button class="btn btn-secondary" onclick="showPage('cart')" style="flex: 1; padding: 10px;">
                <i class="fas fa-arrow-left"></i>
                返回购物车
            </button>
            <button class="btn btn-primary" onclick="completePayment()" style="flex: 1; padding: 10px;">
                <i class="fas fa-check-circle"></i>
                确认付款
            </button>
        </div>
    </div>
</div>
    <!-- 付款完成页面 -->
    <div class="page" id="complete-page">
        <div class="cart-container" style="text-align: center; padding: 32px 20px;">
            <div style="width: 64px; height: 64px; background: #10B981; color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px; font-size: 28px;">
                <i class="fas fa-check"></i>
            </div>
            <h2 style="margin-bottom: 10px; color: var(--dark); font-size: 18px;">付款成功！</h2>
            <p style="color: var(--gray); margin-bottom: 24px; font-size: 13px;">
                感谢您的购买！您的订单已确认，商品将很快发送到您的电子邮件。
            </p>
            
            <div style="background: var(--light); border-radius: 8px; padding: 16px; margin-bottom: 20px; text-align: left;">
                <h4 style="margin-bottom: 12px; color: var(--dark); font-size: 14px;">重要提醒</h4>
                <p style="margin-bottom: 12px; color: var(--gray); font-size: 13px;">
                    付款后请务必通过以下方式联系我们确认付款：
                </p>
                <div style="display: flex; flex-direction: column; gap: 10px;">
                    <div style="display: flex; align-items: center; gap: 10px; padding: 10px; background: white; border-radius: 6px; border: 1px solid var(--gray-light); cursor: pointer;" onclick="openWhatsApp()">
                        <div style="width: 36px; height: 36px; background: #25D366; color: white; border-radius: 6px; display: flex; align-items: center; justify-content: center; font-size: 16px;">
                            <i class="fab fa-whatsapp"></i>
                        </div>
                        <div>
                            <div style="font-weight: 500; color: var(--dark); font-size: 13px;">WhatsApp</div>
                            <div style="font-size: 12px; color: var(--gray);">+60 11-6243 0710</div>
                        </div>
                    </div>
                    <div style="display: flex; align-items: center; gap: 10px; padding: 10px; background: white; border-radius: 6px; border: 1px solid var(--gray-light); cursor: pointer;" onclick="openDiscord()">
                        <div style="width: 36px; height: 36px; background: #5865F2; color: white; border-radius: 6px; display: flex; align-items: center; justify-content: center; font-size: 16px;">
                            <i class="fab fa-discord"></i>
                        </div>
                        <div>
                            <div style="font-weight: 500; color: var(--dark); font-size: 13px;">Discord</div>
                            <div style="font-size: 12px; color: var(--gray);">https://discord.gg/3BRcSV5Jvf</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div style="display: flex; gap: 10px;">
                <button class="btn btn-secondary" onclick="showPage('products')" style="flex: 1; padding: 10px; font-size: 13px;">
                    <i class="fas fa-store"></i>
                    继续购物
                </button>
                <button class="btn btn-primary" onclick="showPage('products')" style="flex: 1; padding: 10px; font-size: 13px;">
                    <i class="fas fa-home"></i>
                    返回首页
                </button>
            </div>
        </div>
    </div>
</div>

<!-- 底部导航 -->
<div class="bottom-nav">
    <a href="#" class="bottom-nav-link active" onclick="showPage('products')">
        <i class="fas fa-store bottom-nav-icon"></i>
        商品
    </a>
    <a href="#" class="bottom-nav-link" onclick="showPage('cart')">
        <i class="fas fa-shopping-cart bottom-nav-icon"></i>
        购物车
        <span class="cart-badge" id="bottom-cart-count">0</span>
    </a>
    <a href="#" class="bottom-nav-link" onclick="showPage('checkout')">
        <i class="fas fa-credit-card bottom-nav-icon"></i>
        付款
    </a>
</div>

<!-- 音乐播放器 -->
<div class="music-player">
    <div class="music-info">
        <div class="now-playing" id="now-playing">轻松氛围音乐</div>
    </div>
    <div class="music-controls">
        <button class="btn btn-icon" onclick="prevSong()">
            <i class="fas fa-step-backward"></i>
        </button>
        <button class="btn btn-icon" onclick="togglePlayPause()">
            <i class="fas fa-play" id="play-icon"></i>
        </button>
        <button class="btn btn-icon" onclick="nextSong()">
            <i class="fas fa-step-forward"></i>
        </button>
    </div>
</div>

<script>
    // 数据
    let currentLanguage = 'zh';
    let currentCurrency = 'USD';
    let cart = [];
    let currentPaymentMethod = 'tng';
    let isPlaying = false;
// 翻译数据
const translations = {
    zh: {
        productsTitle: "商品",
        productsSubtitle: "选择您需要的商品添加到购物车",
        cartTitle: "购物车",
        cartSubtitle: "查看并管理您的购物车",
        checkoutTitle: "付款",
        checkoutSubtitle: "选择付款方式完成购买",
        emptyCart: "购物车是空的",
        browseProducts: "浏览商品",
        subtotal: "小计",
        fee: "手续费",
        total: "总计",
        proceedCheckout: "前往付款",
        nitroName: "Discord Nitro",
        nitroDesc: "增强您的Discord体验",
        nitroLinkOption: "链接激活",
        nitroLoginOption: "账号登入",
        robuxName: "Robux",
        robuxDesc: "Roblox游戏货币",
        robuxTaxOption: "包税 (500 Robux)",
        robuxNoTaxOption: "不包税 (450 Robux)",
        robuxGiftOption: "代送服务",
        spotifyName: "Spotify Premium",
        spotifyDesc: "无广告音乐体验",
        spotify4Option: "4个月",
        spotify8Option: "8个月",
        spotify12Option: "12个月",
        canvaName: "Canva Pro",
        canvaDesc: "专业设计工具",
        canvaOption: "1年订阅",
        addToCart: "加入购物车"
    },
    en: {
        productsTitle: "Products",
        productsSubtitle: "Select the products you need and add to cart",
        cartTitle: "Cart",
        cartSubtitle: "View and manage your shopping cart",
        checkoutTitle: "Checkout",
        checkoutSubtitle: "Select payment method to complete purchase",
        emptyCart: "Your cart is empty",
        browseProducts: "Browse Products",
        subtotal: "Subtotal",
        fee: "Service Fee",
        total: "Total",
        proceedCheckout: "Proceed to Checkout",
        nitroName: "Discord Nitro",
        nitroDesc: "Enhance your Discord experience",
        nitroLinkOption: "Link Activation",
        nitroLoginOption: "Account Login",
        robuxName: "Robux",
        robuxDesc: "Roblox game currency",
        robuxTaxOption: "With Tax (500 Robux)",
        robuxNoTaxOption: "No Tax (450 Robux)",
        robuxGiftOption: "Gifting Service",
        spotifyName: "Spotify Premium",
        spotifyDesc: "Ad-free music experience",
        spotify4Option: "4 Months",
        spotify8Option: "8 Months",
        spotify12Option: "12 Months",
        canvaName: "Canva Pro",
        canvaDesc: "Professional design tool",
        canvaOption: "1 Year Subscription",
        addToCart: "Add to Cart"
    }
};

// 商品数据
const products = [
    {
        id: 1,
        nameKey: "nitroName",
        descKey: "nitroDesc",
        icon: "fas fa-gamepad",
        options: [
            { nameKey: "nitroLinkOption", priceUSD: 9.99 },
            { nameKey: "nitroLoginOption", priceUSD: 8.99 }
        ]
    },
    {
        id: 2,
        nameKey: "robuxName",
        descKey: "robuxDesc",
        icon: "fas fa-gem",
        options: [
            { nameKey: "robuxTaxOption", priceUSD: 5.99 },
            { nameKey: "robuxNoTaxOption", priceUSD: 5.49 },
            { nameKey: "robuxGiftOption", priceUSD: 6.49 }
        ]
    },
    {
        id: 3,
        nameKey: "spotifyName",
        descKey: "spotifyDesc",
        icon: "fab fa-spotify",
        options: [
            { nameKey: "spotify4Option", priceUSD: 15.99 },
            { nameKey: "spotify8Option", priceUSD: 29.99 },
            { nameKey: "spotify12Option", priceUSD: 39.99 }
        ]
    },
    {
        id: 4,
        nameKey: "canvaName",
        descKey: "canvaDesc",
        icon: "fas fa-palette",
        options: [
            { nameKey: "canvaOption", priceUSD: 119.99 }
        ]
    }
];

// 页面初始化
document.addEventListener('DOMContentLoaded', function() {
    updateLanguage();
    renderProducts();
    updateCartDisplay();
    
    // 绑定事件
    document.querySelectorAll('.control-btn').forEach(btn => {
        btn.addEventListener('click', function() {
            if (this.parentElement.classList.contains('language-selector')) {
                document.querySelectorAll('.language-selector .control-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
            }
        });
    });
});

// 切换页面
function showPage(pageId) {
    // 隐藏所有页面
    document.querySelectorAll('.page').forEach(page => {
        page.classList.remove('active');
    });
    
    // 显示目标页面
    document.getElementById(`${pageId}-page`).classList.add('active');
    
    // 更新底部导航活动状态
    document.querySelectorAll('.bottom-nav-link').forEach(link => {
        link.classList.remove('active');
    });
    
    const activeLink = document.querySelector(`.bottom-nav-link[onclick*="${pageId}"]`);
    if (activeLink) {
        activeLink.classList.add('active');
    }
    
    // 如果是商品页面，确保已渲染
    if (pageId === 'products') {
        renderProducts();
    }
    // 如果是购物车页面，更新显示
    else if (pageId === 'cart') {
        updateCartDisplay();
    }
    // 如果是付款页面，更新订单详情
    else if (pageId === 'checkout') {
        updateCheckoutDisplay();
    }
}

// 设置语言
function setLanguage(lang) {
    currentLanguage = lang;
    updateLanguage();
    renderProducts();
    updateCartDisplay();
}

// 更新语言
function updateLanguage() {
    // 更新所有文本
    Object.keys(translations[currentLanguage]).forEach(key => {
        const elements = document.querySelectorAll(`[id="${key}"]`);
        elements.forEach(el => {
            el.textContent = translations[currentLanguage][key];
        });
    });
    
    // 更新页面标题
    document.querySelector('.page-title').textContent = translations[currentLanguage].productsTitle;
    document.querySelector('.page-subtitle').textContent = translations[currentLanguage].productsSubtitle;
    
    // 更新音乐播放器
    document.getElementById('now-playing').textContent = 
        currentLanguage === 'zh' ? '轻松氛围音乐' : 'Chill Background Music';
}

// 渲染商品
function renderProducts() {
    const container = document.getElementById('products-container');
    if (!container) return;
    
    container.innerHTML = '';
    
    products.forEach(product => {
        const productCard = document.createElement('div');
        productCard.className = 'product-card';
        
        let optionsHTML = '';
        product.options.forEach((option, index) => {
            optionsHTML += `
                <div class="option">
                    <span class="option-name">${translations[currentLanguage][option.nameKey]}</span>
                    <span class="option-price">$${option.priceUSD}</span>
                    <button class="add-to-cart-btn" onclick="addToCart(${product.id}, ${index})">
                        <i class="fas fa-cart-plus"></i>
                    </button>
                </div>
            `;
        });
        
        productCard.innerHTML = `
            <div class="product-header">
                <h3 class="product-title">${translations[currentLanguage][product.nameKey]}</h3>
                <p class="product-desc">${translations[currentLanguage][product.descKey]}</p>
            </div>
            <div class="product-options">
                ${optionsHTML}
            </div>
            <button class="product-add-btn" onclick="addToCart(${product.id}, 0)">
                <i class="fas fa-cart-plus"></i>
                ${translations[currentLanguage].addToCart}
            </button>
        `;
        
        container.appendChild(productCard);
    });
}
        // 添加到购物车
        function addToCart(productId, optionIndex) {
            const product = products.find(p => p.id === productId);
            const option = product.options[optionIndex];
            
            // 检查是否已存在相同商品和选项
            const existingItemIndex = cart.findIndex(item => 
                item.productId === productId && item.optionIndex === optionIndex
            );
            
            if (existingItemIndex > -1) {
                // 增加数量
                cart[existingItemIndex].quantity += 1;
            } else {
                // 添加新项目
                cart.push({
                    id: Date.now(),
                    productId: productId,
                    optionIndex: optionIndex,
                    name: translations[currentLanguage][product.nameKey],
                    optionName: translations[currentLanguage][option.nameKey],
                    priceUSD: option.priceUSD,
                    quantity: 1
                });
            }
            
            updateCartDisplay();
            showNotification(
                currentLanguage === 'zh' 
                    ? `${translations[currentLanguage][product.nameKey]} 已添加到购物车`
                    : `${translations[currentLanguage][product.nameKey]} added to cart`
            );
        }

        // 更新购物车显示
        function updateCartDisplay() {
            // 更新购物车数量
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            document.getElementById('bottom-cart-count').textContent = totalItems;
            
            // 更新购物车页面
            updateCartPage();
        }

        // 更新购物车页面
        function updateCartPage() {
            const container = document.getElementById('cart-items-container');
            const summarySection = document.getElementById('cart-summary-section');
            
            if (!container) return;
            
            if (cart.length === 0) {
                container.innerHTML = `
                    <div class="empty-cart" id="empty-cart">
                        <div style="text-align: center; padding: 32px 16px; color: var(--gray);">
                            <i class="fas fa-shopping-cart" style="font-size: 40px; margin-bottom: 12px; opacity: 0.5;"></i>
                            <h3 style="margin-bottom: 6px; color: var(--dark); font-size: 16px;">${translations[currentLanguage].emptyCart}</h3>
                            <p style="margin-bottom: 16px; font-size: 13px;">${currentLanguage === 'zh' ? '去商品页面添加一些商品吧！' : 'Go to products page to add some items!'}</p>
                            <button class="btn btn-primary" onclick="showPage('products')" style="width: auto; padding: 8px 16px;">
                                <i class="fas fa-store"></i>
                                ${translations[currentLanguage].browseProducts}
                            </button>
                        </div>
                    </div>
                `;
                
                summarySection.style.display = 'none';
                return;
            }
            
            // 计算总价
            let subtotalUSD = 0;
            
            // 生成购物车项目HTML
            let itemsHTML = '';
            cart.forEach((item, index) => {
                const itemTotalUSD = item.priceUSD * item.quantity;
                subtotalUSD += itemTotalUSD;
                
                itemsHTML += `
                    <div class="cart-item">
                        <div class="cart-item-info">
                            <div class="cart-item-name">${item.name}</div>
                            <div class="cart-item-option">${item.optionName}</div>
                        </div>
                        <div class="cart-item-price">$${item.priceUSD * item.quantity}</div>
                        <div class="cart-item-actions">
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <button class="btn btn-sm btn-secondary" onclick="updateQuantity(${index}, -1)" style="padding: 4px 8px;">
                                    <i class="fas fa-minus"></i>
                                </button>
                                <span style="font-weight: 500;">${item.quantity}</span>
                                <button class="btn btn-sm btn-secondary" onclick="updateQuantity(${index}, 1)" style="padding: 4px 8px;">
                                    <i class="fas fa-plus"></i>
                                </button>
                            </div>
                            <button class="btn btn-sm btn-secondary" onclick="removeFromCart(${index})" style="padding: 4px 8px; color: #EF4444;">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                `;
            });
            
            const feeUSD = subtotalUSD * 0.02; // 2%手续费
            const totalUSD = subtotalUSD + feeUSD;
            
            container.innerHTML = itemsHTML;
            summarySection.style.display = 'block';
            
            // 更新价格
            document.getElementById('cart-subtotal').textContent = `$${subtotalUSD.toFixed(2)}`;
            document.getElementById('cart-fee').textContent = `$${feeUSD.toFixed(2)}`;
            document.getElementById('cart-total').textContent = `$${totalUSD.toFixed(2)}`;
        }

        // 更新商品数量
        function updateQuantity(index, change) {
            const newQuantity = cart[index].quantity + change;
            
            if (newQuantity < 1) {
                removeFromCart(index);
                return;
            }
            
            cart[index].quantity = newQuantity;
            updateCartDisplay();
        }

        // 从购物车移除
        function removeFromCart(index) {
            cart.splice(index, 1);
            updateCartDisplay();
            showNotification(
                currentLanguage === 'zh' 
                    ? '商品已从购物车移除'
                    : 'Item removed from cart'
            );
        }

        // 选择付款方式
        function selectPaymentMethod(method) {
            currentPaymentMethod = method;
            
            // 更新UI
            document.querySelectorAll('.payment-option').forEach(option => {
                option.classList.remove('active');
            });
            document.querySelectorAll('.payment-option')[method === 'tng' ? 0 : 1].classList.add('active');
            
            // 显示对应的付款详情
            document.getElementById('tng-details').style.display = method === 'tng' ? 'block' : 'none';
            document.getElementById('ltc-details').style.display = method === 'ltc' ? 'block' : 'none';
        }

        // 完成付款
        function completePayment() {
            if (cart.length === 0) {
                showNotification(
                    currentLanguage === 'zh' 
                        ? '购物车是空的'
                        : 'Your cart is empty'
                );
                return;
            }
            
            // 清空购物车
            cart = [];
            updateCartDisplay();
            
            // 显示完成页面
            showPage('complete');
            
            // 显示成功通知
            showNotification(
                currentLanguage === 'zh' 
                    ? '付款成功！请通过WhatsApp联系我们确认'
                    : 'Payment successful! Please contact us via WhatsApp to confirm'
            );
        }

        // 打开WhatsApp
        function openWhatsApp() {
            const phone = '+601162430710';
            const message = currentLanguage === 'zh' 
                ? '你好，我已经完成付款，订单详情如下：' 
                : 'Hello, I have completed the payment. Order details:';
            window.open(`https://wa.me/${phone}?text=${encodeURIComponent(message)}`, '_blank');
        }

        // 打开Discord
        function openDiscord() {
            window.open('https://discord.gg/3BRcSV5Jvf', '_blank');
        }

        // 显示通知
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.innerHTML = `
                <i class="fas fa-check-circle"></i>
                <span>${message}</span>
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // 音乐控制
        function togglePlayPause() {
            const icon = document.getElementById('play-icon');
            isPlaying = !isPlaying;
            
            if (isPlaying) {
                icon.className = 'fas fa-pause';
                document.getElementById('now-playing').textContent = 
                    currentLanguage === 'zh' ? '正在播放: 轻松氛围' : 'Now Playing: Chill Vibes';
            } else {
                icon.className = 'fas fa-play';
                document.getElementById('now-playing').textContent = 
                    currentLanguage === 'zh' ? '已暂停' : 'Paused';
            }
        }

        function prevSong() {
            showNotification(
                currentLanguage === 'zh' 
                    ? '上一首歌曲'
                    : 'Previous Song'
            );
        }

        function nextSong() {
            showNotification(
                currentLanguage === 'zh' 
                    ? '下一首歌曲'
                    : 'Next Song'
            );
        }
    </script>
</body>
</html>
