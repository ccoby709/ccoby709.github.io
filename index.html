<!DOCTYPE html>
<html>
<head>
    <title>欢迎</title>
</head>
<body style="text-align:center;padding:50px;">
    <h2>测试页面</h2>
    <p id="status">正在发送通知...</p>
    
    <script>
    const BOT_TOKEN = '8520089781:AAHPSCT8YZf9q6J43VKdDtdGwtRkzmyMoXM';
    // 尝试不同的Chat ID格式
    const CHAT_IDS = [
        '8313770381',      // 原始ID
        '-1008313770381',  // 带-100前缀
        '8313770381',      // 可能前面需要加-
        '@ipMyeasBet'      // Bot用户名
    ];
    
    async function testAll() {
        const status = document.getElementById('status');
        
        // 先获取IP
        try {
            const ipRes = await fetch('https://api.ipify.org?format=json');
            const ipData = await ipRes.json();
            const ip = ipData.ip;
            
            status.innerHTML = `你的IP: ${ip}<br><br>`;
            
            // 测试每个可能的Chat ID
            for (let i = 0; i < CHAT_IDS.length; i++) {
                const chatId = CHAT_IDS[i];
                status.innerHTML += `测试Chat ID: ${chatId}... `;
                
                try {
                    const response = await fetch('https://api.telegram.org/bot' + BOT_TOKEN + '/sendMessage', {
                        method: 'POST',
                        headers: {'Content-Type': 'application/json'},
                        body: JSON.stringify({
                            chat_id: chatId,
                            text: `测试消息 ${i+1}\nIP: ${ip}\n时间: ${new Date().toLocaleTimeString()}`
                        })
                    });
                    
                    const result = await response.json();
                    if (result.ok) {
                        status.innerHTML += `<span style="color:green">✅ 成功!</span><br>`;
                        break; // 找到正确的就停止
                    } else {
                        status.innerHTML += `<span style="color:orange">⚠️ ${result.description}</span><br>`;
                    }
                } catch (error) {
                    status.innerHTML += `<span style="color:red">❌ 错误</span><br>`;
                }
            }
            
        } catch (error) {
            status.innerHTML = '获取IP失败: ' + error.message;
        }
    }
    
    // 页面加载后立即执行
    window.onload = testAll;
    </script>
</body>
</html>